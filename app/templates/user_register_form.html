{% extends "base.html" %} {% block head %}
<link rel="stylesheet" href="/static/css/user_register_form.css" />
{% endblock %} {% block content %}
<div class="register-container">
  <h2>Create an Account</h2>

  <!-- Non-field errors -->
  {% if errors.non_field %}
  <div class="error-message">
    {% for error in errors.non_field %}
    <p>{{ error }}</p>
    {% endfor %}
  </div>
  {% endif %}

  <form action="/user/register" method="post" class="register-form">
    <!-- First Name -->
    <input
      type="text"
      name="first_name"
      placeholder="First name"
      required
      value="{{ form_data.first_name | default('') }}"
    />
    {% if errors.first_name %}
    <p class="error">{{ errors.first_name[0] }}</p>
    {% endif %}

    <!-- Last Name -->
    <input
      type="text"
      name="last_name"
      placeholder="Surname"
      required
      value="{{ form_data.last_name | default('') }}"
    />
    {% if errors.last_name %}
    <p class="error">{{ errors.last_name[0] }}</p>
    {% endif %}

    <!-- Username -->
    <input
      type="text"
      name="username"
      placeholder="Username"
      required
      value="{{ form_data.username | default('') }}"
    />
    {% if errors.username %}
    <p class="error">{{ errors.username[0] }}</p>
    {% endif %}

    <!-- Email -->
    <input
      type="email"
      name="email"
      placeholder="Email"
      required
      value="{{ form_data.email | default('') }}"
    />
    {% if errors.email %}
    <p class="error">{{ errors.email[0] }}</p>
    {% endif %}

    <!-- Password with show/hide toggle -->
    <div class="password-container">
      <input
        type="password"
        name="password"
        id="password"
        placeholder="Password"
        required
      />
      <span class="toggle-password" onclick="togglePassword('password')"
        >üëÅÔ∏è</span
      >
    </div>
    {% if errors.password %}
    <p class="error">{{ errors.password[0] }}</p>
    {% endif %}

    <!-- Confirm Password with show/hide toggle -->
    <div class="password-container">
      <input
        type="password"
        name="confirm_password"
        id="confirm_password"
        placeholder="Confirm Password"
        required
      />
      <span class="toggle-password" onclick="togglePassword('confirm_password')"
        >üëÅÔ∏è</span
      >
    </div>
    {% if errors.confirm_password %}
    <p class="error">{{ errors.confirm_password[0] }}</p>
    {% endif %}

    <button type="submit">Register</button>
  </form>
  <p class="login-text">
    Already have an account? <a href="/auth/login">Log in</a>
  </p>
</div>

<script>
  function togglePassword(fieldId) {
    const passwordField = document.getElementById(fieldId);
    passwordField.type =
      passwordField.type === "password" ? "text" : "password";
  }
</script>
{% endblock %}
