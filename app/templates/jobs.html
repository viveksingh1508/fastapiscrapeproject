{% extends "base.html" %} {% block head %}
<link rel="stylesheet" href="/static/css/jobs.css" />
{% endblock %}{% block content %}
<header class="main-header">
  {% include "search_form.html" %}
</header>

{% if jobs %}
<h1 style="text-align: center; margin-top: 0px">Available Jobs</h1>
{% endif %}

{% for job in jobs %}
<div class="job-card">
  <a href="/job/{{ job.id }}" style="text-decoration: none; color: inherit">
    <div class="job" style="width: 70%; margin: 0 auto">
      <h2>{{ job.title }}</h2>
      <p><strong>Company:</strong> {{ job.company }}</p>
      <p><strong>Title:</strong> {{ job.job_title }}</p>
      <p><strong>Experience:</strong> {{ job.experience }}</p>
      <p><strong>Type:</strong> {{ job.job_type }}</p>
      <p><strong>Role:</strong> {{ job.role }}</p>
      <p><strong>Location:</strong> {{ job.location }}</p>
      <p><strong>Salary Range:</strong> {{ job.salary_range }}</p>
      <p><strong>Preference:</strong> {{ job.preferences }}</p>
      <p><strong>Skills:</strong> {{ job.skills }}</p>
      <p><strong>Education:</strong> {{ job.qualifications }}</p>
      <p>
        <strong>Description:</strong> {{ job.job_description|truncate(100, True,
        '...') }}
        <a href="/job/{{ job.id }}">Read more</a>
      </p>
      <p>
        <strong>Posted on:</strong>
        <span data-posted-at="{{ job.posted_at }}"></span>
      </p>
    </div>
  </a>
</div>

{% else %}
</div>  {# closes the job listing wrapper safely if needed #}

{% if request.query_params.get("keyword") or request.query_params.get("location") %}
  <div style="text-align: center; margin-top: 2rem">
    <p>
      The search
      <strong>
        "{{ request.query_params.get('keyword', '') }} {{ request.query_params.get('location', '') }}"
      </strong>
      did not match any jobs.
    </p>
    <p>Search suggestions:</p>
    <ul style="display: inline-block; text-align: left;">
      <li>Try more general keywords</li>
      <li>Check your spelling</li>
      <li>Replace abbreviations with the entire word</li>
    </ul>
  </div>
{% else %}
  <p style="text-align: center; margin-top: 2rem">
    No jobs available at the moment.
  </p>
{% endif %}
{% endfor %}


{% if jobs %}
  <div style="text-align: center; margin-top: 20px">
    {% if page > 1 %}
    <a
      href="?keyword={{ request.query_params.get('keyword', '') }}&location={{ request.query_params.get('location', '') }}&page={{ page - 1 }}"
      style="margin-right: 10px"
      >&laquo; Previous</a
    >
    {% endif %} 
    Page {{ page }} of {{ total_pages }} 
    {% if page < total_pages %}
    <a
      href="?keyword={{ request.query_params.get('keyword', '') }}&location={{ request.query_params.get('location', '') }}&page={{ page + 1 }}"
      style="margin-left: 10px"
      >Next &raquo;</a
    >
    {% endif %}
  </div>
{% endif %}


<script src="/static/js/jobUploadTime.js"></script>
{% endblock %}
